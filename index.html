<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3DCG 背景デザイナー ポートフォリオ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts: Cinzel & Noto Sans JP -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #050505;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        h1, h2, h3, .font-cinzel { font-family: 'Cinzel', serif; }

        /* カスタムスクロールバー */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background-color: #4f46e5; border-radius: 3px; }
        ::-webkit-scrollbar-track { background-color: #0f172a; }

        /* スライダー画像 */
        .slider-image-container {
            opacity: 0;
            transition: opacity 2.5s ease-in-out; /* 2.5秒かけてゆっくりとフェード */
            pointer-events: none;
            filter: brightness(0.6) contrast(1.1);
        }
        .slider-image-container.active { opacity: 1; }

        /* グラスモーフィズム */
        .glass-panel {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* テキスト装飾 */
        .hero-title-gradient {
            background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(165, 180, 252, 0.3);
        }

        /* 作品カード */
        .portfolio-card {
            position: relative;
            overflow: hidden;
            border-radius: 0.75rem;
            aspect-ratio: 16/9;
        }
        .portfolio-card img {
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .portfolio-card:hover img { transform: scale(1.1); }
        .portfolio-card .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 1.5rem;
        }
        .portfolio-card:hover .overlay { opacity: 1; }
        
        /* アニメーション */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* スキルバーアニメーション */
        @keyframes fillBar {
            from { width: 0; }
        }
        .skill-bar-fill {
            animation: fillBar 1.5s ease-out forwards;
        }

        /* AI生成ローディングアニメーション */
        .thinking-dots span {
            animation: thinking 1.4s infinite ease-in-out both;
            background-color: #6366f1;
            border-radius: 50%;
            display: inline-block;
            height: 6px;
            width: 6px;
            margin: 0 2px;
        }
        .thinking-dots span:nth-child(1) { animation-delay: -0.32s; }
        .thinking-dots span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes thinking {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#818cf8',
                        dark: '#050505',
                        surface: '#0f172a',
                    }
                }
            }
        }
    </script>
</head>
<body class="antialiased min-h-screen selection:bg-primary selection:text-white">

    <!-- ナビゲーション -->
    <header class="fixed top-0 w-full z-50 glass-panel border-b-0 border-b-white/5 transition-all duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-cinzel font-bold text-white tracking-widest hover:text-primary transition-colors">
                [YOUR NAME] <span class="text-primary text-sm align-top">CG</span>
            </a>

            <nav class="hidden md:flex space-x-8">
                <a href="#hero" class="text-sm font-medium text-slate-300 hover:text-white hover:tracking-widest transition-all duration-300">HOME</a>
                <a href="#portfolio" class="text-sm font-medium text-slate-300 hover:text-white hover:tracking-widest transition-all duration-300">WORKS</a>
                <a href="#profile" class="text-sm font-medium text-slate-300 hover:text-white hover:tracking-widest transition-all duration-300">PROFILE</a>
                <a href="#contact" class="text-sm font-medium text-slate-300 hover:text-white hover:tracking-widest transition-all duration-300">CONTACT</a>
            </nav>
            
            <button id="mobile-menu-button" class="md:hidden text-white hover:text-primary transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </div>
        <!-- モバイルメニュー -->
        <div id="mobile-menu" class="hidden md:hidden bg-black/95 backdrop-blur-xl absolute w-full border-t border-white/10">
            <nav class="flex flex-col p-4 space-y-4 text-center">
                <a href="#hero" class="text-slate-300 hover:text-white py-2">HOME</a>
                <a href="#portfolio" class="text-slate-300 hover:text-white py-2">WORKS</a>
                <a href="#profile" class="text-slate-300 hover:text-white py-2">PROFILE</a>
                <a href="#contact" class="text-slate-300 hover:text-white py-2">CONTACT</a>
            </nav>
        </div>
    </header>

    <main>
        <!-- ヒーローセクション -->
        <section id="hero" class="relative h-screen flex items-center justify-center overflow-hidden">
            <div id="hero-background" class="absolute inset-0 z-0 bg-black"></div>
            <div class="absolute inset-0 z-10 bg-[radial-gradient(circle_at_center,transparent_0%,#000_100%)] opacity-80"></div>
            <div class="absolute inset-0 z-10 bg-black/40"></div>
            
            <div class="container mx-auto px-4 relative z-20 text-center reveal active">
                <p class="text-primary tracking-[0.3em] text-sm md:text-base mb-4 font-bold uppercase">Environment Artist Portfolio</p>
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-black mb-6 leading-tight hero-title-gradient">
                    BUILDING<br>WORLDS
                </h1>
                <p class="text-slate-300 text-sm md:text-lg max-w-2xl mx-auto mb-10 leading-relaxed font-light tracking-wide">
                    想像を超える「場所」を、ピクセルとして具現化する。<br>
                    ゲーム、映像、メタバースのための没入型環境デザイン。
                </p>
                <a href="#portfolio" class="inline-flex items-center gap-2 px-8 py-3 rounded-full bg-white text-black font-bold shadow-[0_0_20px_rgba(255,255,255,0.3)] transition-all hover:scale-105 hover:shadow-[0_0_30px_rgba(255,255,255,0.5)]">
                    VIEW WORKS
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                </a>
            </div>
        </section>

        <!-- ポートフォリオセクション -->
        <section id="portfolio" class="py-24 bg-dark relative z-10">
            <div class="container mx-auto px-6">
                <div class="flex flex-col md:flex-row justify-between items-end mb-16 reveal">
                    <div>
                        <h2 class="text-4xl md:text-5xl font-bold text-white mb-2">SELECTED WORKS</h2>
                        <div class="h-1 w-20 bg-primary"></div>
                    </div>
                    <p class="text-slate-400 mt-4 md:mt-0 text-right">
                        フォトリアルからスタイライズドまで、<br>物語を感じさせる背景美術。
                    </p>
                </div>
                <div id="portfolio-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-12">
                    <!-- JSで挿入 -->
                </div>
            </div>
        </section>

        <!-- プロフィールセクション -->
        <section id="profile" class="py-24 bg-[#080808] relative border-t border-white/5">
            <div class="container mx-auto px-6 reveal">
                <div class="flex flex-col lg:flex-row gap-16 items-center lg:items-start">
                    <!-- プロフィール画像エリア (左側) -->
                    <div class="w-full lg:w-1/3 flex flex-col items-center text-center">
                        <div class="relative w-64 h-64 mb-8">
                            <div class="absolute inset-0 bg-gradient-to-tr from-primary to-purple-500 rounded-full blur opacity-40 animate-pulse"></div>
                            <img src="https://placehold.co/400x400/1e293b/ffffff?text=Artist" alt="Profile" class="relative w-full h-full object-cover rounded-full border-4 border-[#1a1a1a] shadow-2xl grayscale hover:grayscale-0 transition-all duration-500">
                        </div>
                        <h2 class="text-3xl font-cinzel font-bold text-white mb-2">[YOUR NAME]</h2>
                        <p class="text-primary tracking-widest text-sm font-bold uppercase mb-6">3DCG Environment Artist</p>
                        
                        <div class="flex space-x-4">
                            <!-- Social Icons -->
                            <a href="#" class="p-3 bg-white/5 rounded-full hover:bg-primary hover:text-white transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg></a>
                            <a href="#" class="p-3 bg-white/5 rounded-full hover:bg-primary hover:text-white transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a>
                            <a href="#" class="p-3 bg-white/5 rounded-full hover:bg-primary hover:text-white transition-colors"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a>
                        </div>
                    </div>

                    <!-- テキストエリア (右側) -->
                    <div class="w-full lg:w-2/3">
                        <!-- About Me -->
                        <h3 class="text-2xl font-bold text-white mb-6 border-l-4 border-primary pl-4">ABOUT ME</h3>
                        <div class="space-y-4 text-slate-300 leading-relaxed mb-10 font-light">
                            <p>
                                デジタル空間に「物語」と「歴史」を刻む背景アーティストです。単にリアルなだけでなく、その場所に誰が住み、どのような時間を過ごしてきたのかが伝わる環境デザインを心がけています。
                            </p>
                            <p>
                                建築様式や自然現象の観察に基づいた説得力のある造形と、最新のレンダリング技術を組み合わせ、プレイヤーの没入感を最大化する空間作りを追求しています。ゲームエンジン（UE5）でのリアルタイムレンダリングと最適化を得意としています。
                            </p>
                        </div>

                        <!-- Skills -->
                        <h3 class="text-xl font-bold text-white mb-6">SKILLS</h3>
                        <div class="space-y-6 mb-12">
                            <div>
                                <div class="flex justify-between mb-2 text-sm font-bold text-slate-400">
                                    <span>Unreal Engine 5</span>
                                    <span>95%</span>
                                </div>
                                <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-full bg-primary skill-bar-fill" style="width: 95%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-2 text-sm font-bold text-slate-400">
                                    <span>Maya / Blender</span>
                                    <span>90%</span>
                                </div>
                                <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-full bg-secondary skill-bar-fill" style="width: 90%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-2 text-sm font-bold text-slate-400">
                                    <span>Substance Painter / Designer</span>
                                    <span>85%</span>
                                </div>
                                <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-full bg-indigo-400 skill-bar-fill" style="width: 85%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-2 text-sm font-bold text-slate-400">
                                    <span>ZBrush</span>
                                    <span>80%</span>
                                </div>
                                <div class="h-2 bg-white/10 rounded-full overflow-hidden">
                                    <div class="h-full bg-indigo-300 skill-bar-fill" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Career History (追加) -->
                        <h3 class="text-xl font-bold text-white mb-6">CAREER HISTORY</h3>
                        <div class="space-y-8 border-l-2 border-white/10 ml-3 pl-8 relative">
                            <!-- 経歴アイテム 1 -->
                            <div class="relative">
                                <span class="absolute -left-[41px] top-1 h-5 w-5 rounded-full border-4 border-[#080808] bg-primary"></span>
                                <span class="text-sm text-slate-400 mb-1 block">2022 - Present</span>
                                <h4 class="text-lg font-bold text-white">Lead Environment Artist</h4>
                                <p class="text-slate-500 text-sm">Global Game Studio Inc.</p>
                                <p class="text-slate-400 text-sm mt-2 leading-relaxed">
                                    AAAタイトルの背景チームをリードし、クオリティ管理と新人育成を担当。
                                </p>
                            </div>
                            <!-- 経歴アイテム 2 -->
                            <div class="relative">
                                <span class="absolute -left-[41px] top-1 h-5 w-5 rounded-full border-4 border-[#080808] bg-secondary"></span>
                                <span class="text-sm text-slate-400 mb-1 block">2019 - 2022</span>
                                <h4 class="text-lg font-bold text-white">Environment Artist</h4>
                                <p class="text-slate-500 text-sm">Creative Arts Tokyo</p>
                                <p class="text-slate-400 text-sm mt-2 leading-relaxed">
                                    コンシューマーゲームのステージ制作に従事。プロシージャルワークフローの導入を推進。
                                </p>
                            </div>
                            <!-- 経歴アイテム 3 -->
                            <div class="relative">
                                <span class="absolute -left-[41px] top-1 h-5 w-5 rounded-full border-4 border-[#080808] bg-indigo-400"></span>
                                <span class="text-sm text-slate-400 mb-1 block">2017 - 2019</span>
                                <h4 class="text-lg font-bold text-white">Junior 3D Modeler</h4>
                                <p class="text-slate-500 text-sm">Indie Spirit Games</p>
                                <p class="text-slate-400 text-sm mt-2 leading-relaxed">
                                    アセット制作とテクスチャリングを担当。Unityでのレベルデザイン補助。
                                </p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- コンタクトセクション -->
        <section id="contact" class="py-24 relative overflow-hidden bg-[#0a0a0a]">
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[500px] bg-primary/10 rounded-full blur-[100px] pointer-events-none"></div>
            <div class="container mx-auto px-6 relative z-10 max-w-4xl text-center reveal">
                <h2 class="text-3xl md:text-5xl font-bold text-white mb-8">LET'S CREATE TOGETHER</h2>
                <p class="text-slate-400 text-lg mb-12">
                    新しいプロジェクトのご相談をお待ちしております。
                </p>
                <a href="mailto:your.email@example.com" class="inline-flex items-center justify-center px-10 py-4 bg-primary text-white font-bold rounded-lg shadow-lg hover:bg-secondary transition-all transform hover:-translate-y-1">
                    CONTACT ME
                </a>
            </div>
        </section>
    </main>

    <footer class="bg-black py-8 border-t border-white/10 text-center text-slate-600 text-xs tracking-wider">
        <p>&copy; 2024 [YOUR NAME]. All Rights Reserved.</p>
    </footer>

    <!-- 拡張されたモーダル -->
    <div id="project-modal" class="fixed inset-0 z-[60] hidden" role="dialog" aria-modal="true">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-md transition-opacity" onclick="closeModal()"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4 md:p-6 pointer-events-none">
            <div class="bg-[#0f172a] w-full max-w-7xl max-h-[95vh] rounded-xl overflow-hidden shadow-2xl flex flex-col pointer-events-auto border border-white/10 relative animate-fade-in-up">
                
                <button onclick="closeModal()" class="absolute top-4 right-4 z-20 p-2 bg-black/60 text-white rounded-full hover:bg-primary transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>

                <div class="flex-1 overflow-y-auto custom-scrollbar flex flex-col lg:flex-row">
                    <!-- 左側：画像ギャラリー (スクロール可能) -->
                    <div class="lg:w-7/12 bg-black bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] overflow-y-auto custom-scrollbar">
                        <div id="modal-gallery-container" class="flex flex-col gap-8 p-4 md:p-8 min-h-min">
                            <!-- JSで画像をここに挿入します -->
                        </div>
                    </div>
                    
                    <!-- 右側：詳細情報 -->
                    <div class="lg:w-5/12 p-8 lg:p-10 bg-[#0f172a] border-l border-white/5 flex flex-col gap-8 h-full overflow-y-auto custom-scrollbar">
                        <div>
                            <span class="text-primary text-xs font-bold tracking-widest uppercase mb-2 block" id="modal-category">Category</span>
                            <h3 id="modal-title" class="text-3xl md:text-4xl font-cinzel font-bold text-white leading-tight mb-4"></h3>
                            <div class="flex flex-wrap gap-2 mb-6">
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded text-xs text-slate-300" id="modal-duration-badge"></span>
                                <span class="px-3 py-1 bg-white/5 border border-white/10 rounded text-xs text-slate-300" id="modal-poly"></span>
                            </div>
                        </div>

                        <!-- AI 解説エリア (NEW) -->
                        <div class="bg-white/5 border border-white/10 rounded-lg p-4 relative overflow-hidden group">
                            <div class="absolute -right-6 -top-6 w-20 h-20 bg-primary/20 rounded-full blur-2xl group-hover:bg-primary/30 transition-all duration-500"></div>
                            <div class="flex justify-between items-center mb-3 relative z-10">
                                <h4 class="text-sm font-bold text-primary flex items-center gap-2">
                                    <span>✨</span> AI Curator's Note
                                </h4>
                                <button onclick="generateAiDescription()" id="ai-desc-btn" class="text-[10px] tracking-wider bg-primary/20 hover:bg-primary text-white px-3 py-1 rounded transition-all duration-300 border border-primary/30">
                                    GENERATE STORY
                                </button>
                            </div>
                            <div id="ai-description-container" class="relative z-10 min-h-[4em]">
                                <p id="ai-description-text" class="text-sm text-slate-400 italic leading-relaxed font-light">
                                    Click the button to let AI interpret the world behind this artwork...
                                </p>
                                <!-- Loading Indicator (Hidden by default) -->
                                <div id="ai-loading" class="hidden absolute inset-0 flex items-center justify-center bg-[#0f172a]/80 backdrop-blur-sm">
                                    <div class="thinking-dots"><span></span><span></span><span></span></div>
                                </div>
                            </div>
                        </div>

                        <!-- タブのようなセクション切り替え -->
                        <div class="space-y-6">
                            <div class="border-l-2 border-primary pl-4">
                                <h4 class="text-sm font-bold text-white uppercase tracking-wider mb-2">Concept & Description</h4>
                                <p id="modal-description" class="text-sm text-slate-300 leading-relaxed font-light"></p>
                            </div>

                            <div class="border-l-2 border-secondary pl-4">
                                <h4 class="text-sm font-bold text-white uppercase tracking-wider mb-2">My Role</h4>
                                <p id="modal-role" class="text-sm text-slate-300 leading-relaxed font-light"></p>
                            </div>
                        </div>

                        <div class="mt-auto pt-8 border-t border-white/5">
                            <h4 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-4">Technical Details</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="block text-slate-500 text-xs">Tools</span>
                                    <span id="modal-tools" class="text-white"></span>
                                </div>
                                <div>
                                    <span class="block text-slate-500 text-xs">Texture Size</span>
                                    <span id="modal-texture" class="text-white"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        // 画像 (単色のまま)
        const backgroundImages = [
            "https://placehold.co/1920x1080/ffffff/000000?text=White",
            "https://placehold.co/1920x1080/ff0000/ffffff?text=Red",
            "https://placehold.co/1920x1080/0000ff/ffffff?text=Blue",
            "https://placehold.co/1920x1080/ffff00/000000?text=Yellow"
        ];
        
        // 拡張された作品データ (画像とキャプションのペアに変更)
        const projects = [
            {
                id: 1,
                title: "Groningen Canal",
                category: "Realistic Environment",
                description: "オランダ・フローニンゲンの静寂な運河を再現しました。早朝の冷たく澄んだ空気感を表現するため、青みを帯びたライティングと、水面の微妙な揺らぎに注力しています。建物のレンガは経年劣化を表現するため、Substance Designerでカスタムマテリアルを作成しました。",
                role: "リファレンス収集から最終レンダリングまでの全工程を担当。特に建物のモジュラー設計と、Vertex Paintによる汚れのブレンド処理に注力しました。",
                duration: "8 Weeks",
                tools: "UE5, Maya, Substance Painter",
                polyCount: "~2M Tris",
                textureSize: "4K (Hero), 2K (Props)",
                thumbnailUrl: "uploaded:ohunesan.jpg-b8ef5f68-b845-4819-9053-98491a07642d",
                // ギャラリー画像リスト (画像URLとキャプションのオブジェクト配列)
                gallery: [
                    {
                        url: "uploaded:ohunesan.jpg-b8ef5f68-b845-4819-9053-98491a07642d",
                        caption: "Final Render - 早朝の静寂な空気感を目指してライティング調整を行いました。"
                    },
                    {
                        url: "uploaded:wire.jpg-c0739aed-ff82-4781-ae14-cc10615878be",
                        caption: "Wireframe - 建物はモジュラー構造で作成し、効率的に配置しています。"
                    },
                    {
                        url: "uploaded:kkk.jpg-a38d4ade-ca56-43e7-b93e-6350a38e0f8c",
                        caption: "Lighting Pass - 詳細なテクスチャを適用する前のライティング確認（Clay Render）。"
                    },
                    {
                        url: "uploaded:ohunesan.jpg-d1eb018c-cef0-4a4a-a143-937bf7cfe4b3",
                        caption: "Material Detail - Substance Designerで作成したレンガのマテリアル。"
                    }
                ]
            },
            {
                id: 2,
                title: "Ancient Ruins",
                category: "Game Environment",
                description: "失われた文明の遺跡。プレイヤーを奥へと誘うような構図と、プロシージャル生成を用いた岩のディテールが特徴です。ライティングは神秘的な雰囲気を出すためにGod Rayを活用しています。",
                role: "レベルデザイン、ライティング、主要アセットの作成。岩の配置にはプロシージャルツールを使用し、効率的な背景制作を行いました。",
                duration: "6 Weeks",
                tools: "Blender, ZBrush, Marmoset",
                polyCount: "~1.5M Tris",
                textureSize: "2K UDIMs",
                thumbnailUrl: "https://placehold.co/800x450/2a2a2a/ffffff?text=Ancient+Ruins",
                gallery: [
                     { url: "https://placehold.co/1200x800/2a2a2a/ffffff?text=Ancient+Ruins+Main", caption: "Main Shot - 神秘的な遺跡の全景" },
                     { url: "https://placehold.co/1200x800/2a2a2a/ffffff?text=Ancient+Ruins+Detail+1", caption: "Detail - 岩肌のディテール" },
                     { url: "https://placehold.co/1200x800/2a2a2a/ffffff?text=Ancient+Ruins+Detail+2", caption: "Lighting - 光の差し込み表現" },
                     { url: "https://placehold.co/1200x800/2a2a2a/ffffff?text=Ancient+Ruins+Wireframe", caption: "Wireframe" }
                ]
            },
            {
                id: 3,
                title: "Deep Space Lab",
                category: "Cinematics",
                description: "無機質で冷徹なSF研究所。映画的なルックを目指し、金属の質感とライティングの反射を入念に調整しました。物語性を感じさせる小道具の配置にもこだわっています。",
                role: "コンセプトアートに基づく3Dシーン構築。ハードサーフェスモデリングと、Nukeを使用したコンポジット処理を担当。",
                duration: "5 Weeks",
                tools: "Houdini, Clarisse, Nuke",
                polyCount: "High Poly",
                textureSize: "4K/8K",
                thumbnailUrl: "https://placehold.co/800x450/1a1a2e/ffffff?text=Sci-Fi+Lab",
                gallery: [
                    { url: "https://placehold.co/1200x800/1a1a2e/ffffff?text=Sci-Fi+Lab+Main", caption: "Main Shot - 無機質な研究所内部" },
                    { url: "https://placehold.co/1200x800/1a1a2e/ffffff?text=Sci-Fi+Lab+Angle+2", caption: "Angle 2 - 別アングルからの構図" },
                    { url: "https://placehold.co/1200x800/1a1a2e/ffffff?text=Sci-Fi+Lab+Clay", caption: "Clay Render" },
                    { url: "https://placehold.co/1200x800/1a1a2e/ffffff?text=Sci-Fi+Lab+Process", caption: "Composite Process" }
                ]
            },
            {
                id: 4,
                title: "Zen Garden",
                category: "Asset Creation",
                description: "静寂に包まれた日本庭園。SpeedTreeを用いた植生のリアリズムと、Substance Designerによる石畳の質感にこだわりました。風に揺れる木々の動きも設定しています。",
                role: "植生アセットの作成、マテリアル作成、シーンアセンブリ。和風独特の侘び寂びを表現するためのテクスチャ調整を担当。",
                duration: "4 Weeks",
                tools: "UE4, SpeedTree, Substance",
                polyCount: "~800k Tris",
                textureSize: "2K Tiled",
                thumbnailUrl: "https://placehold.co/800x450/2e3830/ffffff?text=Zen+Garden",
                gallery: [
                    { url: "https://placehold.co/1200x800/2e3830/ffffff?text=Zen+Garden+Main", caption: "Main Shot - 日本庭園の全景" },
                    { url: "https://placehold.co/1200x800/2e3830/ffffff?text=Zen+Garden+Assets", caption: "Vegetation Assets - 植生アセット一覧" },
                    { url: "https://placehold.co/1200x800/2e3830/ffffff?text=Zen+Garden+Night", caption: "Night Scene - 夜間のライティング" },
                    { url: "https://placehold.co/1200x800/2e3830/ffffff?text=Zen+Garden+Material", caption: "Material Graph - 石畳のマテリアルノード" }
                ]
            }
        ];

        // Current active project ID
        let activeProjectId = null;

        // スライダー機能
        let currentImageIndex = 0;
        let sliderElements = [];
        function renderBackgroundSlider() {
            const container = document.getElementById('hero-background');
            if (!container) return;
            backgroundImages.forEach((url, index) => {
                const imgContainer = document.createElement('div');
                imgContainer.className = 'slider-image-container absolute inset-0';
                const img = document.createElement('img');
                img.src = url;
                img.className = 'w-full h-full object-cover';
                imgContainer.appendChild(img);
                container.appendChild(imgContainer);
                sliderElements.push(imgContainer);
            });
            if (sliderElements.length > 0) sliderElements[0].classList.add('active');
            setInterval(() => {
                sliderElements[currentImageIndex].classList.remove('active');
                currentImageIndex = (currentImageIndex + 1) % sliderElements.length;
                sliderElements[currentImageIndex].classList.add('active');
            }, 6000); // 6秒間隔で切り替え (2.5s フェード + 3.5s 表示)
        }

        // プロジェクト描画
        function renderProjects() {
            const grid = document.getElementById('portfolio-grid');
            if (!grid) return;
            projects.forEach((project, index) => {
                const card = document.createElement('div');
                card.style.transitionDelay = `${index * 100}ms`;
                card.className = 'portfolio-card bg-[#1a1a1a] shadow-2xl cursor-pointer group reveal';
                card.innerHTML = `
                    <img src="${project.thumbnailUrl}" alt="${project.title}" loading="lazy">
                    <div class="overlay">
                        <span class="text-primary text-xs font-bold tracking-widest uppercase mb-1 translate-y-4 group-hover:translate-y-0 transition-transform duration-500">${project.category}</span>
                        <h3 class="text-2xl font-cinzel font-bold text-white translate-y-4 group-hover:translate-y-0 transition-transform duration-500 delay-75">${project.title}</h3>
                    </div>
                `;
                card.onclick = () => openModal(project.id);
                grid.appendChild(card);
            });
        }

        // モーダル機能 (更新: ギャラリーキャプション対応)
        window.openModal = function(id) {
            const p = projects.find(x => x.id === id);
            if (!p) return;
            
            activeProjectId = id; // Set active project for AI generation

            // テキスト情報の設定
            document.getElementById('modal-title').textContent = p.title;
            document.getElementById('modal-category').textContent = p.category;
            document.getElementById('modal-description').textContent = p.description;
            document.getElementById('modal-role').textContent = p.role;
            document.getElementById('modal-duration-badge').textContent = p.duration;
            document.getElementById('modal-poly').textContent = p.polyCount;
            document.getElementById('modal-tools').textContent = p.tools;
            document.getElementById('modal-texture').textContent = p.textureSize;
            
            // AIテキストエリアをリセット
            document.getElementById('ai-description-text').textContent = "Click the button to let AI interpret the world behind this artwork...";
            document.getElementById('ai-description-text').classList.add("italic", "text-slate-400");
            document.getElementById('ai-description-text').classList.remove("not-italic", "text-slate-300");

            // ギャラリー画像の生成
            const galleryContainer = document.getElementById('modal-gallery-container');
            galleryContainer.innerHTML = ''; // クリア

            // galleryデータが存在すればそれを使用
            // データ構造変更: item は { url: string, caption: string } または string (後方互換用)
            const items = p.gallery && p.gallery.length > 0 ? p.gallery : [p.thumbnailUrl];

            items.forEach(item => {
                const itemContainer = document.createElement('div');
                itemContainer.className = "mb-8"; // 画像間の余白

                // 画像
                const img = document.createElement('img');
                const url = typeof item === 'string' ? item : item.url;
                img.src = url;
                img.className = "w-full h-auto object-cover rounded shadow-lg mb-3";
                img.alt = p.title;
                itemContainer.appendChild(img);

                // キャプション
                if (typeof item === 'object' && item.caption) {
                    const caption = document.createElement('p');
                    caption.textContent = item.caption;
                    caption.className = "text-slate-400 text-sm italic border-l-2 border-primary/50 pl-3";
                    itemContainer.appendChild(caption);
                }

                galleryContainer.appendChild(itemContainer);
            });
            
            const modal = document.getElementById('project-modal');
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        window.closeModal = function() {
            const modal = document.getElementById('project-modal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // AI機能: Gemini API呼び出し
        window.generateAiDescription = async function() {
            if (!activeProjectId) return;
            
            const project = projects.find(p => p.id === activeProjectId);
            if (!project) return;

            const loading = document.getElementById('ai-loading');
            const outputText = document.getElementById('ai-description-text');
            
            loading.classList.remove('hidden'); // Show loading
            
            try {
                const apiKey = ""; // API Key injected by environment
                const genAI = new GoogleGenerativeAI(apiKey);
                const model = genAI.getGenerativeModel({ model: "gemini-2.5-flash-preview-09-2025" });

                const prompt = `
                    あなたはプロの美術キュレーターです。
                    以下の3DCG作品の情報を元に、この作品の「世界観」や「物語」、「鑑賞者が注目すべき美的なポイント」を、
                    詩的かつ専門的な言葉で、150文字程度の日本語で魅力的に語ってください。
                    
                    作品タイトル: ${project.title}
                    カテゴリ: ${project.category}
                    説明: ${project.description}
                    使用ツール: ${project.tools}
                `;

                const result = await model.generateContent(prompt);
                const response = await result.response;
                const text = response.text();

                // 結果を表示
                outputText.textContent = text;
                outputText.classList.remove("italic", "text-slate-400");
                outputText.classList.add("not-italic", "text-slate-300");

            } catch (error) {
                console.error("Error generating AI description:", error);
                outputText.textContent = "申し訳ありません。AIによる解析中にエラーが発生しました。";
            } finally {
                loading.classList.add('hidden'); // Hide loading
            }
        }

        // スクロール検知
        function setupScrollAnimation() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('active');
                });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        // モバイルメニュー
        document.getElementById('mobile-menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderBackgroundSlider();
            renderProjects();
            setupScrollAnimation();
        });
    </script>
</body>
</html>
